<div class="row p-3" id="machine-title">
    <h1 class="display-6 text-uppercase fw-semibold m-0"><i class="bi bi-gear-wide-connected"></i> máquinas</h1>
</div>
<div class="row p-4">
    <p class="fs-5 p-2 m-0" id="machine-add-title">Editar máquina</p>
</div>
<div class="row px-4">
    {{#with machine}}
        <form action="/machines/edit/{{maquinaId}}" class="needs-validation" id="form-edit-machine" method="post" novalidate>
            <div class="row mb-4 gy-4 justify-content-md-between">
                <div class="col-md-4 p-0 h-100">
                    <div class="row mb-2 m-0 text-center bg-danger text-white">
                        <p class="fs-6 p-1 m-0">Información general</p>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="serialnumber" class="form-label">Número de serie:</label>
                        <div class="input-group has-validation">
                            <span class="input-group-text border-dark border-2 border-end-0" id="basic-addon1"><i class="bi bi-upc"></i></span>
                            <input type="text" name="serialnumber" id="serialnumber" value="{{numSerie}}" class="form-control border-dark border-2 rounded-end" required>
                            <div class="valid-feedback">
                                ¡Perfecto!
                            </div>
                            <div class="invalid-feedback">
                                <span id="invalid-feedback-serialnumber"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="brand" class="form-label">Marca:</label>
                        <div class="input-group has-validation">
                            <span class="input-group-text border-dark border-2 border-end-0" id="basic-addon1"><i class="bi bi-gear"></i></span>
                            <input type="text" name="brand" id="brand" value="{{marca}}" class="form-control border-dark border-2 rounded-end" required>
                            <div class="valid-feedback">
                                ¡Perfecto!
                            </div>
                            <div class="invalid-feedback">
                                <span id="invalid-feedback-brand"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="name" class="form-label">Nombre:</label>
                        <div class="input-group has-validation">
                            <span class="input-group-text border-dark border-2 border-end-0" id="basic-addon1"><i class="bi bi-card-text"></i></span>
                            <input type="text" name="name" id="name" value="{{nombre}}" class="form-control border-dark border-2 rounded-end" autocomplete="on" required>
                            <div class="valid-feedback">
                                ¡Perfecto!
                            </div>
                            <div class="invalid-feedback">
                                <span id="invalid-feedback-name"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="inktype" class="form-label">Tipo de tinta:</label>
                        <div class="input-group">
                            <select name="inktype" id="inktype" class="form-select border-dark border-2">
                                <option value="Acuosa" {{#equal tipoTinta "Acuosa"}}selected{{/equal}}>Acuosa</option>
                                <option value="Sublimación" {{#equal tipoTinta "Sublimación"}}selected{{/equal}}>Sublimación</option>
                                <option value="Solvente" {{#equal tipoTinta "Solvente"}}selected{{/equal}}>Solvente</option>
                                <option value="Ecosolvente" {{#equal tipoTinta "Ecosolvente"}}selected{{/equal}}>Ecosolvente</option>
                                <option value="Latex o resina" {{#equal tipoTinta "Latex o resina"}}selected{{/equal}}>Latex o resina</option>
                                <option value="Curado UV" {{#equal tipoTinta "Curado UV"}}selected{{/equal}}>Curado UV</option>
                                <option value="Híbrida solvente-UV" {{#equal tipoTinta "Híbrida solvente-UV"}}selected{{/equal}} >Híbrida solvente-UV</option>
                                <option value="Sólida" {{#equal tipoTinta "Sólida"}}selected{{/equal}}>Sólida</option>
                            </select>
                            <div class="valid-feedback">
                                ¡Perfecto!
                            </div>
                            <div class="invalid-feedback">
                                Por favor, seleccione un tipo de tinta
                            </div>
                        </div>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="headtype" class="form-label">Tipo de cabezal:</label>
                        <div class="input-group">
                            <select name="headtype" id="headtype" class="form-select border-dark border-2">
                                <option value="Térmico" {{#equal tipoCabezal "Térmico"}}selected{{/equal}}>Térmico</option>
                                <option value="Piezoeléctrico" {{#equal tipoCabezal "Piezoeléctrico"}}selected{{/equal}}>Piezoeléctrico</option>
                            </select>
                            <div class="valid-feedback">
                                ¡Perfecto!
                            </div>
                            <div class="invalid-feedback">
                                Por favor, seleccione un tipo de cabezal
                            </div>
                        </div>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="headnum" class="form-label">Número de cabezales:</label>
                        <div class="input-group has-validation">
                            <span class="input-group-text border-dark border-2 border-end-0" id="basic-addon1"><i class="bi bi-123"></i></span>
                            <input type="number" min="0" max="10" name="headnum" value="{{numCabezales}}" id="headnum" class="form-control border-dark border-2 rounded-end" required>
                            <div class="valid-feedback">
                                ¡Perfecto!
                            </div>
                            <div class="invalid-feedback">
                                <span id="invalid-feedback-headnum"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="speed" class="form-label">Velocidad (<var>m²/h</var>):</label>
                        <div class="input-group has-validation">
                            <span class="input-group-text border-dark border-2 border-end-0" id="basic-addon1"><i class="bi bi-speedometer2"></i></span>
                            <input type="number" min="0" name="speed" value="{{velocidad}}" id="speed" class="form-control border-dark border-2 rounded-end" required>
                            <div class="valid-feedback">
                                ¡Perfecto!
                            </div>
                            <div class="invalid-feedback">
                                <span id="invalid-feedback-speed"></span>
                            </div>
                        </div>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="techcontact" class="form-label">Contacto del técnico:</label>
                        <div class="row m-0 p-0">
                            <div class="col-5">
                                <input type="text" name="extension" id="extension" value="{{conTecnicoExt}}" class="form-control border-dark border-2" placeholder="Extensión">
                                <div class="valid-feedback">
                                    <span id="valid-feedback-extension"></span>
                                </div>
                                <div class="invalid-feedback">
                                    <span id="invalid-feedback-extension"></span>
                                </div>
                            </div>
                            <div class="col-7">
                                <div class="input-group has-validation">
                                    <span class="input-group-text border-dark border-2 border-end-0" id="basic-addon1"><i class="bi bi-telephone"></i></span>
                                    <input type="text" name="techcontact" id="techcontact" value="{{conTecnico}}" class="form-control border-dark border-2 rounded-end" required>
                                    <div class="valid-feedback">
                                        ¡Perfecto!
                                    </div>
                                    <div class="invalid-feedback">
                                        <span id="invalid-feedback-techcontact"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 p-0">
                    <div class="row mb-2 m-0 text-center bg-danger text-white">
                        <p class="fs-6 p-1 m-0">Información operativa</p>
                    </div>
                    <div class="row py-2 px-0">
                        <label for="statusop1" class="form-label">Estatus:</label>
                        <div class="row m-0 justify-content-md-start">
                            <div class="col-3 d-grid ps-0">
                                <input type="radio" name="status" id="statusop1" class="btn-check" value="1" autocomplete="off" {{#if activo}}checked{{/if}}>
                                <label for="statusop1" class="btn btn-outline-success border-success border-2">Activa</label>
                            </div>
                            <div class="col-3 d-grid pe-0">
                                <input type="radio" name="status" id="statusop2" class="btn-check" value="0" autocomplete="off" {{#unless activo}}checked{{/unless}}>
                                <label for="statusop2" class="btn btn-outline-danger border-danger border-2">Inactiva</label>
                            </div>
                        </div>
                    </div>
                    <div class="row pt-2 px-0">
                        <div class="table-responsive-xxl overflow-y-auto" id="table-users-add" style="max-height: 33.9rem;">
                            <table class="table table-striped table-hover caption-top align-middle border border-2" style="--bs-table-hover-bg: #2a91ff; --bs-table-hover-color: #fff; --bs-table-active-bg: #0d6efd; --bs-table-active-color: #fff;">
                                <caption class="text-reset">
                                    <div class="row">
                                        <div class="col-md-6">
                                            Usuarios disponibles:
                                        </div>
                                        <div class="col-md-6 text-end">
                                            <span id="invalid-feedback-allowedUser"></span>
                                        </div>
                                    </div>
                                </caption>
                                <thead>
                                    <tr>
                                        <th scope="col" class="d-none"></th>
                                        <th scope="col">Nombre del usuario</th>
                                        <th scope="col">Area</th>
                                        <th scope="col">Rol</th>
                                    </tr>
                                </thead>
                                <tbody class="table-group-divider">
                                    {{#each ../users}}
                                        <tr style="cursor: pointer;">
                                            <td class="d-none">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="allowedUser" value="{{usuarioId}}" {{#each ../../selectedUsers}} {{#equal ../usuarioId usuario_id}}checked{{/equal}} {{/each}}>
                                                </div>
                                            </td>
                                            <th scope="row">{{Empleado}}</th>
                                            <td>{{Area}}</td>
                                            <td>{{Rol}}</td>
                                        </tr>
                                    {{else}}
                                        <tr>
                                            <td class="d-none"></td>
                                            <td class="d-none"></td>
                                            <td class="d-none"></td>
                                            <td colspan="4" class="text-center">No existen usuarios registrados</td>
                                        </tr>
                                    {{/each}}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row my-3 m-0 justify-content-end">
                        <div class="col-md-auto p-0">
                            <button class="btn btn-danger me-4" type="reset">Restablecer campos</button>
                            <button class="btn btn-success" type="submit">Editar máquina</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    {{/with}}
</div>